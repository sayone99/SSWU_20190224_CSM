# SSWU_20190224_CSM 구세원 

컴퓨터 시스템 관리 14주차 실습일지입니다.

### *실습과제 결과*

**server(b)의 웹서버 (server의 ens32 IP주소로 접근)**


![실습과제 결과1](https://user-images.githubusercontent.com/65717358/120909596-8488c900-c6b1-11eb-80cc-61d94465fda4.PNG)


**server의 ens32(외부망-공인IP = 워드프레스 주소), ens35(내부망-사설IP) IP 확인**


![server ip 확인](https://user-images.githubusercontent.com/65717358/120909603-95393f00-c6b1-11eb-9cd1-b07b62e3f73a.PNG) 


**server(b)의 IP 확인** 


![server-b ip 확인](https://user-images.githubusercontent.com/65717358/120909601-91a5b800-c6b1-11eb-8128-b23a590bd3f5.PNG)


**client의 IP 확인**


![client ip 확인](https://user-images.githubusercontent.com/65717358/120909606-99fdf300-c6b1-11eb-9154-c5aff91390e6.PNG)


## 1. 새로 배운 내용

### 방화벽 firewall
  1) 방화벽
    - 미리 수립한 보안 정책에 따라 들어오고 나가는 네트워크를 모니터링하고 관리하는 **네트워크 보안 시스템**
    - 신뢰할 수 있는 '내부' 내트워크 ///(구분 장벽 구성)/// 신뢰활 수 없는 '외부' 네트워크
    - 일상에서 방화벽은 건물 내부에서 화재가 발생했을 때 불이 다른 곳으로 번지지 않도록 막는 장벽 역할을 한다. 
      네트워크 상에서의 방화벽 역시 네트워크에서 혹시 모를 보안 문제가 내부에서 퍼지지 않도록 외부와 내부의 경계에서 경비하고 관리하는 역할을 한다. 
  
  2) 정책 기반 방화벽 
    - 정책을 수립하지 않는 방화벽은 외부의 요청을 모두 허용하거나 모두 거부한다. 외부에서의 요청을 모두 거부하게 되면 안전은 보장되지만 내부의 컴퓨터, 서버들이 외부의 인터넷에 연결할 수 없다는 단점이 있다. 
    - 위와 같은 단점을 보완하기 위해 정책을 수립하고 그 정책에 따라 외부의 요청을 수용하는 방화벽을 동작시킨다. 이 때 특정 서버에서 접근하는 경우는 모두 로그를 남겨 이를 분석하고 체크하는 방식으로 보안을 강화한다. 
  
  3) 구축 방법에 따른 방화벽 분류
    - SW 방화벽 // 속도는 상대적으로 느리지만 쉽게 제어할 수 있다는 장점이 있다. 
    - HW 방화벽 // 속도와 성능은 좋지만 그 만큼 가격도 상당하다는 아쉬움이 있다.
    - NPU 기반 방화벽 : SW + HW 방화벽 
  
  4) 방화벽 역사
    - 1세대 방화벽 : 패킷 필터 
      - **Packet 단위 검사** = 패킷은 데이터 정보와 헤더 정보를 구성되어 있는데 이 헤더 정보에 담긴 출발지 IP, PORT번호, 도착지 IP를 확인해 어디서 온 패킷인지(출발지 IP), 어디로 갈 패킷인지 (PORT 번호)를 확인하여 정책에 따라 허용이나 거부하는 방식 
      - 패킷이 증가하면 하나하나 검사해야 하므로 load가 많아져 대기시간이 길어진다는 단점이 있다.    
    - 2세대 방화벽 : 스테이트풀  인스펙션 
      - 패킷 필터의 단점을 보완하여 '세션 단위'로 검사 
    - 3세대 방화벽 : 애플리케이션 방화벽   
      - 응용프로그램에 끼칠 영향을 분석하는 방화벽 
      
  5) 방화벽 역할 및 기능 // 사설 ip로 네트워크가 구성된 경우
    - nonroutable IP(=사설 IP)를 활용하여 내부 PC사이의 네트워크를 형성하여 내부 끼리의 접근은 허용하고 외부 인터넷과의 접속은 허용하거나 제한한 상황 --> 사설 IP범위에 있는 컴퓨터는 원칙적으로는 인터넷 라우터를 통과할 수 없음. 즉, 인터넷 접속이 안됨. 이 때, **IP Masquerading "IP 마스커레이딩"** 설정을 통해 외부 인터넷 접속이 가능하다.
    - **IP 마스커레이딩 IP Masquerading**
      - masquerade = 진실, 진심을 숨기는 가장(가식), 가장 무도회
      - 사설 IP의 주소를 숨기고 공인 IP인 것 처럼 가장하여 외부 인터넷이나 다른 네트워크에 접속할 수 있도록 하는 기능이다. 
      	1) 외부 --> 내부 : 외부에서 내부의 컴퓨터에 패킷을 보내 요청할 때, Masquerade Router에서는 패킷의 헤더정보에 적혀있는 port번호와 도착지 IP 주소를 관련 규칙에 따라 해당하는 사설 IP주소로 변경하여 전송한다.  
      	2) 내부 --> 외부 : 사설 IP가 패킷을 외부로 보내 요청할때 패킷이 Masquerade Router를 거치게 되는데 그 때 Router는 내부 컴퓨터가 보낸 패킷의 헤더 정보에서 출발 IP를 공인 IP로 바꾸어 전송하여 내부 컴퓨터에서도 외부와의 접근이 충분히 가능하도록 한다. 


## 2. 발생한 문제/고민한 점 및 해결방법

- [3.참고내용-1)] 중간 중간 넷마스크가 나와 무엇인지 궁금해 잠시 찾아보았다. 간략하게 정리가 잘 되어 있는 글을 찾아 넷마스크와 ip의 관계를 배울 수 있었다. 
- [3.참고내용-2)] 넷마스크에 대한 자세한 내용들을 배울 수 있었다. 넷마스크가 어떤 기능을 하는지, 어떻게 출현하게 되었는지 등을 확인할 수 있다. 

## 3. 참고 내용

1) https://velog.io/@hidaehyunlee/%EB%84%B7%EB%A7%88%EC%8A%A4%ED%81%ACNetmask%EC%99%80-%EC%84%9C%EB%B8%8C%EB%84%B7%EB%A7%88%EC%8A%A4%ED%81%ACSubnetmask
2) https://www.netinbag.com/ko/internet/what-is-a-netmask.html

## 4. 회고    
    
### 4.1 좋았던 점 +
	
- 실습을 한 구조가 실제 회사의 네트워크 구조랑 많이 비슷한거 같아 실무를 체험해보는 듯한 느낌이 들어 도움이 많이 되었다. 또한 방화벽의 기능을 자세히 알 수 있는 기회였던 것 같아 부족한 점을 채울 수 있는 수업이었다. 

### 4.2 아쉬웠던 점 -
	
- VMware의 연결에서 분명 Bridged로 선택했음에도 불구하고 계속해서 인터넷에 제대로 연결이 되어 고생을 꽤 했다. 백업해놓은 파일로 다시 해보아도 같은 문제가 발생해 결국은 처음부터 다시 설치하여 시간이 오래 걸렸다. 

### 4.3 새로 깨달은 점 !

- 지난 번 메일서버, 웹 서버 수업에 이어 네트워크와 IP에 대해 자세히 배워가는 시간을 가졌는데 뜬 구름같던 개념들을 직접 조작해보고 과정을 눈으로 확인하면서 머릿속이 구체화되는 것을 느꼈다. 네임서버, 메일서버, 웹서버와 웹 클라이언트와 ip와의 관계, 네트워크 등등 이런 키워드들은 실제로 눈에 보이지도 않고 실체화하기 쉽지 않기 때문에 글을 읽고 정리를 해보아도 어려웠다. 그런데 이번 실습을 통해, 역시 아무리 백 번 공부를 해도 한 번 직접 해보는 것보다 못하다는 것을 제대로 느낄 수 있었다.  
