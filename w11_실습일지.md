# SSWU_20190224_CSM 구세원 

컴퓨터 시스템 관리 11주차 실습일지입니다.

### *실습과제 결과*

- serverdp "goosewon.com" 네임서버를 라운드 로빈 방식으로 구현하였다. kubuntu "client" goosewon.com하여 접속하면 '경주월드', '에버랜드', '롯데월드' 중 한 곳으로 이동할 수 있도록 저장해 놓았다.  

1) nslookup 상에서 "www.goosewon.com" 입력 시 출력되는 ip 주소 확인 

![w11 실습과제 결과](https://user-images.githubusercontent.com/65717358/118528166-fdfd5d80-b77c-11eb-8888-b156accc21c1.PNG)


2) 실제 client의 웹 브라우저에서 "goosewon.com"입력 시 접속되는 장면 


https://user-images.githubusercontent.com/65717358/118528268-19686880-b77d-11eb-9032-c32152b61257.mp4

 
 
## 1. 새로 배운 내용

### 1.1 원격접속 구축 - openssh 
  
  1) 원격접속 사용자 계정 생성
  2) openssh 설치 및 설정 
  3) 클라이언트 프로그램 설치
     - iPuTTY
     - Git-Bash 
        : git-bash를 활용하여 원격접속환경을 구축할 수 있도록 한다. 
          git-bash를 통해 `vim ~/.ssh/config`에 정보를 저장하여 호스트 서버에 바로 원격으로 접속할 수 있도록 설정한다. 

### 1.2 Domain Name System 
- DNS : 도메인 네임 시스템, 네임 서버로 서버의 도메인 이름을 IP 주소로 변환하거나 IP주소를 도메인 네임으로 변환 시키는 기능을 수행한다. 
- Domain Name : url로, 네트워크에서 사용자가 서버를 인식하는 이름이다. 우분투는 BIND를 사용 
                도메인 네임은 뒤에서 부터 읽으며 트리구조로 해석한다. "www.google.com(.)"이라면 " . " --> "com" --> "google" --> "www" 순으로 url을 해석하여 실제 해당 서버가 어디에 위치하고 있는 건지 알 수 있다.  
- Local Name Server : 도메인 네임 서버는 외부에서 도메인과 ip주소 짝을 찾는 거라면 로컬 네임 서버는 사용자의 pc안(내부)에서 도메인과 ip주소 짝을 찾는다. 로컬 네임 서버에 저장된 내용은`/etc/resolv.conf`에서 수정할 수 있으며 pc는 우선 로컬 네임 서버에 주소를 물어본 후 응답을 받으면 즉시 연결하고 로컬 네임 서버에 정보가 없어 응답을 받지 못하면 도메인 네임 서버에게 요청하여 응답을 받아 낸다. 
- nslookup : "name server lookup"을 의미하며 네임서버, 네트워크를 관리하고 작업을 도와주는 도구이다. 


 ### 1.3 caching only Name Server 
- 캐싱 전용 네임서버로 pc에서 url로 ip주소를 얻고자 할때 그것을 미리 저장하여 외부의 네임 서버에 묻지 않고 바로 정보를 얻어올 수 있다. 
- 기업체에서 신속한 서버 접속을 위해 캐싱 전용 네임 서버를 두는 경우가 많다. 
- 캐싱 전용 네임 서버는 bind9 bind9utils를 설치하여 구축할 수 있다. `/etc/bind/named.conf.options`(네임서버 설정파일)의 내용을 수정하여 구축가능하다. 또한 systemctl restart named, enable named, status named를 활용하여 캐싱 전용 네임 서버 활성화, 상태 확인 등이 가능하다. 또한 ufw allow 53 (53은 캐싱 전용 네임서버의 포트 번호이다.) 으로 방화벽을 설치할 수 있다.
- `ifconfig`를 통해 해당 서버의 ip주소를 확인할 수 있다. 
> nslookup에선 
> ">server nnn.nnn.nnn.nnn" : nnn.nnn.nnn.nnn으로 로컬 네임서버를 변경할 수 있다.    
- DNS 변경: `/etc/resolv.conf`에서 `nameserver nnn.nnn.nnn.nnn`으로 DNS를 변경할 수 있다. 

### 1.4 Round Robin DNS 
- Master Name Server 마스터 네임 서버 : xxx.john.com과 같은 특정 도메인의 컴퓨터(서버)들을 관리하고 특정 서버의 ip 주소를 알려달라는 요청에 응답하는 네임 서버
- Round Robin 라운드 로빈 : 웹 클라이언트가 ip주소를 요청하면 여러 대의 웹 서버의 ip 주소를 공평하게 전송하여 웹 서버가 과부하 되지 않도록 하는 방식. = load balancing 방식 

- `/etc/bind/named.conf.local` : 특정 도메인의 서버를 요청하는 경우의 zone 형성
- `/etc/bind/sslinux.com.db` : sslinux.com이라는 도메인에 여러 대의 웹 서버 ip주소를 저장하여 load balancing을 구현
- `systemctl restart named` : Round Robin DNS 실행 
- 웹 클라이언트의 DNS는 `/etc/resolv.conf`에서 네임서버 주소를 위의 웹 서버의 ip주소로 변경한다. 


## 2. 발생한 문제/고민한 점 및 해결방법

- named에 저장된 내용에 잘못된 점이 있다고 나왔지만 제대로 작동한 server(b)와 차이가 없었기 때문에 답답했다. vmware와 노트북을 모두 종료하고 재부팅하여 실행하니 그 땐 제대로 작동되었다. 

![bind 오류](https://user-images.githubusercontent.com/65717358/118528355-300ebf80-b77d-11eb-8f54-eb9c1dae39e6.PNG)


## 3. 참고 내용

- 오류가 발생하면 구글링을 하여 찾아보는 것도 좋지만 가장 좋은 점은 프로그램에 나와있는 설명을 읽어보는 것이다. 위에서 발생한 문제 역시 아무런 이상이 없다는 것을 나 스스로 확인할 수 있었던 이유가 바로 프로그램 상에 가이드라인이 나와있었기 때문이다. 아래 사진에서 볼 수 있듯이 파일에 내용을 작성하는 메뉴얼이 맨 위에 주석으로 적혀있다. 이를 따라 쓴 아래 내용은 이상이 없음을 확인할 수 있었다. 

![default-zones](https://user-images.githubusercontent.com/65717358/118530086-343bdc80-b77f-11eb-8ada-d894eb90f752.PNG)


## 4. 회고    
    
### 4.1 좋았던 점 +
	
- DNS를 활용한 여러 기능을 도전해볼 수 있어서 재밌었고 좋았다. 네트워크가 추상적인 개념으로만 다가와 DNS를 관리하고 관련된 작업을 수행하는 것이 어려울 거라고만 생각했는데 막상 시도해보니 개념은 추상적이지만 컴퓨터에서의 작업은 명확하게 보여 오히려 재미를 느꼈다. 내가 작성하는 숫자, 코드가 네트워크를 의미하고 그 네트워크의 방향을 바꾸고 있다는 생각을 하니 마냥 신기하게만 느껴졌던 것 같다. 또한 네임서버와 관련하여 웹 서버로의 신속한 접속을 위해 다양한 접속 방식이 존재할 수 있다는 것을 배워 서버 관리의 중요 포인트 하나를 얻게 되었다. 

### 4.2 아쉬웠던 점 -
	
- 캐싱 전용 네임서버와 로컬 네임서버의 개념이 헷갈리는 점에서 아직은 네트워크가 완전히 머릿 속에 정리되지 않았음을 느꼈다. 또한 오류가 발생했을 때 vmware을 모두 종료하고 pc까지 재부팅한 후 실행했을 땐 제대로 작동되는 것이 조금은 답답하고 아쉬운 것 같다. 나의 잘못으로 오류가 발생한건지 (vmware가 재부팅되면서 잘못 입력했던 부분이 재설정) 정말 vmware상의 오류였던 건지 제대로 확인할 방법이 없기 때문이다. 
  
### 4.3 새로 깨달은 점 !

- 이론 수업에선 DNS를 통해 도메인과 IP를 서로 변환할 수 있다. 정도의 개념만 익히며 어떤 방식이 실제 많이 쓰이는 지 등 실무적인 것은 배우기 힘들었다. 하지만 이번 수업에서 어떻게 해야 실제 서버를 관리하는데 과부하가 걸리지 않도록 할 수 있는지 배울 수 있어 얻어 가는 것도 있었고 재밌었다. 또한 직접 라운드 로빈 방식이나 캐싱 전용 네임서버를 구축해보며 네임서버 구축에 더욱 가까워진 느낌을 받았던 것 같다. 
